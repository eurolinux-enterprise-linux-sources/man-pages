==================== Changes in man-pages-3.22 ====================

Released: 2009-07-25, Munich


Contributors
------------

The following people contributed notes, ideas, or patches that have
been incorporated in changes in this release:

Adrian Dewhurst <sailor@sailorfrag.net>
Alexander Lamaison <awl03@doc.ic.ac.uk>
Bryan Østergaard <kloeri@exherbo.org>
Christopher Head <chead@telus.net>
Doug Goldstein <cardoe@gentoo.org>
Florentin Duneau <fduneau@gmail.com>
Gokdeniz Karadag <gokdenizk@gmail.com>
Jeff Moyer <jmoyer@redhat.com>
KOSAKI Motohiro <kosaki.motohiro@jp.fujitsu.com>
Lucian Adrian Grijincu <lucian.grijincu@gmail.com>
Mark Hills <mark@pogo.org.uk>
Michael Kerrisk <mtk.manpages@gmail.com>
Mike Frysinger <vapier@gentoo.org>
Petr Baudis <pasky@suse.cz>
Reimar Döffinger <Reimar.Doeffinger@gmx.de>
Ricardo Garcia <rg3.zeluan@gmail.com>
Rui Rlex <rui.rlex@gmail.com>
Shachar Shemesh <shachar@debian.org>
Tolga Dalman <tdalman@project-psi.org>
ku roi <kuroibox@yahoo.de>
sobtwmxt <sobtwmxt@sdf.lonestar.org>

Apologies if I missed anyone!


Changes to individual pages
---------------------------

clone.2
    Michael Kerrisk
        Rewrite crufty text about number of args in older version of clone()
                Some bit rot had crept in regarding the discussion of the
                number of arguments in older versions of this syscall.
                Simplify the text to just say that Linux 2.4 and earlier
                didn't have ptid, tls, and ctid arguments.

                See http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=533868
    Michael Kerrisk
        Fix version number for CLONE_NEWIPC
            It's 2.6.19, not 2.4.19.
    Michael Kerrisk
        Fix errors in argument names in text (ptid, ctd)

execve.2
    Mike Frysinger
        Remove erroneous statement that pending signal set is cleared
        on execve(2).

fcntl.2
    Michael Kerrisk
        The kernel source file mandatory.txt is now mandatory-locking.txt
    Michael Kerrisk
        The Documentation/* files are now in Documentation/filesystems

flock.2
    Michael Kerrisk
        Remove unneeded reference to Documentation/mandatory.txt
            Mandatory locks are only implemented by fcntl() locking
    Michael Kerrisk
        The Documentation/* files are now in Documentation/filesystems

fork.2
    Jeff Moyer
        Document fork() behaviour for the Linux native AIO io_context
            It was noted on lkml that the fork behaviour is documented
            for the POSIX AIO calls, but not for the Linux native calls.
            Here is a patch which adds a small blurb that folks will
            hopefully find useful.

            Upon fork(), the child process does not inherit the
            io_context_t data structures returned by io_setup,
            and thus cannot submit further asynchronous I/O or
            reap event completions for said contexts.

getdents.2
    Michael Kerrisk
        The d_type field is fully supported on Btrfs

mount.2
    Michael Kerrisk
        Document MS_STRICTATIME, update description of MS_RELATIME
            Starting with Linux 2.6.30, the MS_RELATIME behavior became
            the default, and MS_STRICTATIME is required to obtain the
            traditional semantics.

poll.2
    Michael Kerrisk
        Remove EBADF error from ERRORS
            As reported by Motohiro:

            "man poll" describe this error code.

            >ERRORS
            > EBADF  An invalid file descriptor was given in one of the sets.

            but current kernel implementation ignore invalid file descriptor,
            not return EBADF.
            ...

            In the other hand, SUSv3 talk about

            > POLLNVAL
            >  The specified fd value is invalid. This flag is only valid in the
            >  revents member; it shall ignored in the events member.

            and

            > If the value of fd is less than 0, events shall be ignored, and
            > ireevents shall be set to 0 in that entry on return from poll().

            but, no desribe EBADF.
            (see http://www.opengroup.org/onlinepubs/009695399/functions/poll.html)

            So, I think the implementation is correct.

            Why don't we remove EBADF description?

sigaction.2
    Michael Kerrisk
        EWxpand description of si_utime and si_stime fields of siginfo_t

stat.2
    Michael Kerrisk
        Improve wording of ENOTDIR error

syscalls.2
    Michael Kerrisk
        Ad preadv() and pwritev(), new in kernel 2.6.30

wait.2
    Gokdeniz Karadag
        Document CLD_DUMPED and CLD_TRAPPED si_code values

daemon.3
    Michael Kerrisk
        Clarify discussion of 'noclose' and 'nochdir' arguments

ffs.3
    Petr Baudis
        SEE ALSO: add memchr(3)

fmemopen.3
    Petr Baudis
        Relocate BUGS section to correct position
    Petr Baudis
        NOTES: there is no file descriptor associated with the returned stream
            Alexander Lamaison pointed out that this is not obvious
            from the documentation, citing an example with passing the
            FILE * handle to a function that tries to fstat() its
            fileno() in order to determine the buffer size.
    Michael Kerrisk
        CONFORMING TO: remove note that these functions are GNU extensions
            That sentence is now redundant, since these functions
            are added in POSIX.1-2008.

lockf.3
    Michael Kerrisk
        Clarify relationship between fcntl() and lockf() locking

memchr.3
    Petr Baudis
        SEE ALSO: add ffs(3)

readdir.3
    Michael Kerrisk
        The d_type field is fully supported on Btrfs

setjmp.3
    Mike Frysinger
        Fix typo and clarify RETURN description
            The word "signal" was duplicated in NOTES, and the RETURN
            section refers to setjmp() and sigsetjmp(), and mentions
            longjmp(), but not siglongjmp().

strcmp.3
    Petr Baudis
        SEE ALSO: add strverscmp(3)

strcpy.3
    Mark Hills
        SEE ALSO: Add strdup(3)

complex.7
    Michael Kerrisk
        Add missing header file for example program
    Reimar Döffinger
        Fix type used in example code
        man complex (from release 3.18) contains the following code:
            complex z = cexp(I * pi);
        Reading the C99 standard, "complex" is not a valid type,
        and several compilers (Intel ICC, ARM RVCT) will refuse to compile.
        It should be
            double complex z = cexp(I * pi); instead.

environ.7
    Michael Kerrisk
        Note that last element in environ array is NULL
            See http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=528628
    Michael Kerrisk
        Wording fixes

mq_overview.7
    Michael Kerrisk
        Note that mkdir and mount commands here need superuser privilege
    Michael Kerrisk
        Fix example showing contents of /dev/mqueue file

standards.7
    Michael Kerrisk
        Remove references to dated books
            Gallmeister and Lewine are rather old books. Probably,
            there are better books to consult nowadays, and anyway,
            this man page isn't intended to be a bibliography.
